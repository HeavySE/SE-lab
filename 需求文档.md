#需求文档

##项目背景
随着信息化技术的发展，校园网逐渐在XN大学各校区展开部署。在校园网的基础上，XN大学想要建立一个能在全校范围内通用的一卡通系统，方便师生正常消费、借书等日常生活使用及相关工作人员实行管理。涉及信息化、财务、后勤等多部门以及全体师生。其中信息办作为牵头单位，同时负责一卡通系统中与IT基础设施和设备相关业务。
1. 使用人数：学生：3万左右；教师：6千左右
2. 开发预算：50万##开发目标
建立一个能在全校范围内通用的一卡通系统。全校师生每人一张卡，就能在学校里完成消费、身份识别等各种功能。
功能概述：各校区间一卡通用，自动备份，正确合理的查询、统计、对账，方便的消费充值、身份识别（借书）功能，必要的财产、隐私安全，个性化定制。
要求：合理好用，不能引起教职工和学生的抱怨。系统稳定正确，使用简单方便，易于工作人员进行管理。##用户对象
 -	信息办工作人员； -	财务处工作人员； -	后勤处工作人员； -	教师、学生。##功能性需求###数据备份1.	涉及对象：信息办。2.	简述：需求出于对数据安全性考虑，系统需要定期对数据进行备份，并且所有备份都要永久有效。根据数据性质不同，采用不同备份方式，但都要保证数据能够被正确及时读取。	1. 定期备份：为确保数据安全或处理某些特殊情况，系统每天会都要采取一次备份。		- 周期：每天一次（暂定午夜3：00）		- 备注：备份时不影响使用且无数据丢失，在线热备份。	2.	毕业生留档备份：针对毕业的学生，数据将留档备份而不再保存在服务器的直接存储设备上，以降低系统运作成本。		- 周期：每年一次（暂定毕业后暑假期间）		- 备注：可采取离线备份，但数据要求永久有效并且能在必要时取出。###充值1.	涉及对象：师生、财务处2.	简述：让学生、老师方便快捷的充值3.	充值方式： 	1. 圈存机充值：通过校园内设置的圈存机设备，师生自助完成从银行卡到一卡通的转账功能。	2.	在线转账：通过校园网络，在网页上执行操作进行从银行卡到一卡通的转账，要求尽快到账并且无需额外操作。	3.	人工充值：在学校指定的充值地点，由财务处指定的工作人员收取现金并将相应金额充入对应师生一卡通内。4.	金额限制：	1.	单笔：下限100元，上限500元，以每100元计	2.	总额：上限900元，下限0元。（师生方视点）5.	备注：	1.	充值过程要求安全可靠（无信息安全问题、无金额丢失问题）	2.	充值金额应尽快到账 （1分钟内）	3.	圈存机、银行卡转账暂且只要求支持农业银行。	4.	对于任何方式的充值，系统都将记录相关信息。###消费1.	涉及对象：财务处、后勤处、师生2.	简述：师生可以通过消费终端（pos机）进行消费，系统将自动从用户一卡通账户中扣取相应金额。3.	消费控制：对短时间大额消费需要输入密码。	- 消费警戒线：50元人民币	- 短时间定义：30分钟（建议）4.	备注：	1. 对于用一卡通进行的消费，系统都将记录具体的消费信息。	2. 校医院消费属于正常消费的一种。###查询（财务处）1.	涉及对象：财务处2.	简述：财务处工作人员在财务处的内部服务器上进行财务数据的查询。3.	查询方式：按时间查询（年、月、日）4.	查询内容：出于隐私保护考虑，只提供必要的信息。	- 消费：消费人员、消费时间、消费地点（设备编号）、消费金额。	- 充值：充值用户、充值方式、操作人员（设备编号）、充值金额。5.	备注：	1. 消费记录不包括用户的具体消费细节	2. 为财务处的内部服务器提供查询财务数据接口###对账1. 涉及对象：财务处、后勤处。2. 简述：系统会获取相应的数据记录进行统计，将金额（及其他必须统计的数据）总额提供给两处以供对账，同时会根据财务处、后勤处的不同查询权限提供相应细节条目。3. 对账周期：每月一次###借书（及相应查询功能）1. 涉及对象：后勤处、师生2. 简述：师生在借书（或其他）时，由一卡通提供借书人信息与借阅图书信息，并提供给第三方系统（图书馆管理系统）。查询也由一卡通系统作为中间媒介，由图书馆管理系统提供数据，在一卡通系统查询界面中提供借阅图书的查询功能。3. 查询方式：按时间查询（年、月、日）4. 备注：本一卡通系统不必负责具体的借（还）图书管理，皆由第三方系统（图书馆管理系统）代为实现。###查询（后勤处）1. 涉及对象：后勤处2. 简述：后勤处工作人员可以通过专用的查询界面（后勤管理系统）查询所需信息（一卡通消费记录）。3. 查询方式：按时间查询（年、月、日）4. 查询内容：出于隐私保护考虑，只提供必要的信息。	- 消费记录：消费时间、消费地点、消费金额、消费具体物品清单。5. 备注：消费记录不包括消费者信息。###查询（师生）1. 涉及对象：师生2. 简述：教师学生可以通过专用的查询界面查询自己的相关信息。3. 查询内容： 	1. 消费记录：消费时间、消费地点、消费金额、消费具体物品清单。	2. 充值记录：充值方式、操作人员、充值金额	3. 其他：卡内余额，个人信息（头像等）、借阅图书历史等（由4.6具体说明）。###安全限制1. 涉及对象：师生2. 简述：用户可以设置自己的消费密码，并在特殊场景时要求输入密码进行后续操作。3. 对应场景：	1. 大额消费：对短时间大额消费时需要输入密码。		- 消费上限：50元人民币		- 短时间定义：30分钟（建议）	2. 网络操作：师生在通过网络对自己一卡通账户进行操作时需要输入密码才能生效。		- 修改照片		- 查看个人信息、充值、消费记录	3. 一卡通挂失：用户通过网络、圈存机进行挂失操作时需要输入密码进行身份确认。###小额透支1. 涉及对象：师生、财务处2. 简述：师生在消费时应能有小额透支权限。3. 限制金额：20元人民币4. 账务：在账目上，对于师生显示的余额将比对于显示给财务处人员的金额少对应（20元）金额，使财务处账务不会出现负账。即当用户余额为100元时，财务处账务上显示的余额未120元5. 资金操作：在师生新建立账户时可统一收取对应（20元）金额作为押金，在账户注销时可以统一通过网银手段直接汇款到用户银行卡内。###挂失1. 涉及对象：师生、财务处2. 简述：师生在丢失卡之后可以挂失自己的一卡通，冻结卡内余额，避免财产损失。3. 挂失方式：	1. 网页挂失：用户可以通过相关的网页进行挂失操作，将自己的一卡通账户余额冻结（需要输入密码，详见安全限制）	2. 指定办事处手动挂失：用户可以到指定办事处（一般为一卡通信息办中心）办理挂失手续，由工作人员操作在系统内冻结账户余额。	3. 圈存机挂失：用户可以在圈存机上进行挂失操作，将自己的一卡通账户余额冻结（需要输入密码，详见安全限制）。4. 补办：因一卡通丢失而需要补办的，可以在挂失若干工作日之后，在指定办理点进行补办。补办时，工作人员可以借由一卡通系统进行相关操作，将原卡数据转入新卡并将原卡作废。###个性化照片1. 涉及对象：师生2. 简述：用户可以自定义个人头像，完成验证流程之后，在一卡通中心领取新卡。3. 验证流程：	- 一般学生：在指定页面提交照片之后，通过所属辅导员审核通过（网页）后完成验证。	- 其他教职员工(建议)：在指定页面提交照片之后，通过所在院系领导（或指定人员）审核通过（网页）后完成验证。##特殊需求###跨校区1. 涉及对象：信息办。2. 简述：本系统应该多个校区之间进行无差别，一卡通在各个校区间是通用的。即对于不同校区之间数据应当及时同步以保证一致。	- 有校园网络：其中有校园网络相通的3个校区间在需要的时候直接进行通信。	- 无校园网络：对于唯一1个没有实现与其他校区校园网络相通的校区，可设置独立服务器，当跨校区使用时会通过互联网传输必要的数据。（该方案在校园网络完工之后可替换成前一条中的方式。）	- 安全性：在网络传输时会采取足够安全的传输加密方式。###设备接入1. 涉及对象：信息办2. 简述：系统将根据设备提供一套接入方案，尽可能利用设备原有硬件环境，并保障每台终端（消费Pos机，图书馆借书设备等）都能正常使用。3. 联网：对于原本没有硬件联网条件的设备，将提供一套无线连入方案。###账户1. 涉及对象：所有用户2. 简述：每个用户（无论是师生、财务处工作人员、信息办工作人员还是后勤处工作人员），都有自己的独立账户、密码，只有登录之后才能进行相关操作（如查询、充值等）。3. 备注：系统账户可以与校园原有的账户系统绑定。账户密码与安全限制密码可以不一致（可选）。###权限升级1. 涉及对象：所有用户2. 简述：当特殊情况发生时（如有账户金额异常等），需要各部门进行具体查账时，可对查询方权限进行临时升级，在一段有效时间内可对申请对象的信息进行查询，在此期间被查询的用户会受到相关通知。3. 过程简述：需要升级权限的工作人员（如财务处、后勤、信息办）可提出申请，系统将通知相关用户。相关用户同意该要求后系统会临时提升该工作人员的查询权限，开放原先保留的消费记录细节。该权限在一定时间后自动失效。4. 有效时间：12小时（建议）